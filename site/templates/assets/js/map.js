$(document).ready(function(){var e=$(".map__switcher li"),s=$(".map__group"),t=-1;o(0);var a="",i="",d="",r=$(location).attr("hash");function c(){$(".search__grid").removeClass("active"),$(".search__result").addClass("active"),$(".search__result p:first-child").text(d),$(".search__result li").removeClass("hidden"),""!=d&&$(".search__result li").addClass("hidden"),""!=a&&$('.search__result li[data-category="'+a+'"]').removeClass("hidden"),""!=i&&$('.search__result li[data-subcategory="'+i+'"]').removeClass("hidden")}function l(){d=i=a="",$(".search input").val(""),$(".search__result").removeClass("active"),$(".search__grid").addClass("active")}function n(a){if(""!=a)if("#cinema"!=a){var e=s.eq(t);$(".map__marker").removeClass("fade"),e.find('.map__marker[data-category!="'+a+'"]').addClass("fade")}else s.each(function(a){0!=$(this).find("[data-cinema]").length&&(o(a),$(this).find(".map__marker:not([data-cinema])").addClass("fade"))})}function o(a){a<0||2<a||a==t||(t=a,e.removeClass("active"),e.eq(t).addClass("active"),function(a){switch(s.removeClass("active").removeClass("hide").removeClass("second").removeClass("third"),s.eq(a).addClass("active"),a){case 0:s.eq(1).addClass("hide"),s.eq(2).addClass("hide");break;case 1:s.eq(0).addClass("second"),s.eq(2).addClass("hide");break;case 2:s.eq(0).addClass("third"),s.eq(1).addClass("second")}$(".map__marker").removeClass("visible").removeClass("fade");var e=s.eq(a).find(".map__marker"),t=500/e.length,i=0;e.each(function(a){var e=$(this);setTimeout(function(){e.closest(".map__group.active").length&&e.addClass("visible")},i),i+=t})}(t))}""!=r&&(n(r),UIkit.Utils.scrollToElement(UIkit.$($("#main-scheme"),{duration:500}))),$(".search__result li").click(function(){var a=$(this).attr("data-id"),e=$('.map__marker[data-id="'+a+'"]').closest(".map__group");o($(".map__group").index(e)),$(".map__marker").removeClass("fade"),e.find('.map__marker[data-id!="'+a+'"]').addClass("fade"),UIkit.modal("#search").hide()}),$(".search__result p:last-child").click(function(){l()}),$(".search__cell li").click(function(){a=$(this).attr("data-category"),i=$(this).attr("data-subcategory"),d=$(this).text(),c()}),$(".search input").on("input",function(){var a;""!=(a=$(this).val().toUpperCase())?(c(),$(".search__result li").each(function(){0!=$(this).text().toUpperCase().indexOf(a)&&$(this).addClass("hidden")})):l()}),$(".map__marker[data-id]").click(function(){var a=$(this).attr("data-id");$(".info").removeClass("active"),$(".info[data-id='"+a+"']").addClass("active");var e=$(".info[data-id='"+a+"'] .info__img").attr("data-bg");$(".info[data-id='"+a+"'] .info__img").css("background-image",e),UIkit.Utils.scrollToElement(UIkit.$($(".info[data-id='"+a+"']"),{duration:500}))}),$(".scheme-start__cell .about-item__link").click(function(){n($(this).attr("data-filter"))}),$(".map__catalog li:not(:first-child)").click(function(){var a=$(this).attr("data-id"),e=$('.map__marker[data-id="'+a+'"]').closest(".map__group");o($(".map__group").index(e)),$(".map__marker").removeClass("fade"),e.find('.map__marker[data-id!="'+a+'"]').addClass("fade")}),$(".map__catalog li:first-child").click(function(){n($(this).attr("data-category"))}),e.click(function(){o(e.index($(this)))})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1hcC5qcyJdLCJuYW1lcyI6WyIkIiwiZG9jdW1lbnQiLCJyZWFkeSIsInRhYnMiLCJncm91cHMiLCJhY3RpdmUiLCJDaGFuZ2VBY3RpdmUiLCJjYXRlZ29yeSIsInN1YmNhdGVnb3J5IiwidGl0bGUiLCJoYXNoIiwibG9jYXRpb24iLCJhdHRyIiwiUmVzdWx0IiwicmVtb3ZlQ2xhc3MiLCJhZGRDbGFzcyIsInRleHQiLCJCYWNrIiwidmFsIiwiU2V0RmlsdGVyIiwiZmlsdGVyIiwiZ3JvdXAiLCJlcSIsImZpbmQiLCJlYWNoIiwiaSIsInRoaXMiLCJsZW5ndGgiLCJpbmRleCIsIm1hcmtlcnMiLCJkZWxheSIsInNlbGYiLCJzZXRUaW1lb3V0IiwiY2xvc2VzdCIsIlNlbGVjdEZsb29yIiwiVUlraXQiLCJVdGlscyIsInNjcm9sbFRvRWxlbWVudCIsImR1cmF0aW9uIiwiY2xpY2siLCJpZCIsIm1vZGFsIiwiaGlkZSIsIm9uIiwidG9VcHBlckNhc2UiLCJpbmRleE9mIiwiZGF0YV9iZyIsImNzcyJdLCJtYXBwaW5ncyI6IkFBQUFBLEVBQUVDLFVBQVVDLE1BQU0sV0FDaEIsSUFBSUMsRUFBT0gsRUFBRSxxQkFDVEksRUFBU0osRUFBRSxlQUNYSyxHQUFVLEVBQ2RDLEVBQWEsR0FDYixJQUFJQyxFQUFXLEdBQ1hDLEVBQWMsR0FDZEMsRUFBTSxHQUVOQyxFQUFPVixFQUFFVyxVQUFVQyxLQUFLLFFBTTVCLFNBQVNDLElBQ1BiLEVBQUUsaUJBQWlCYyxZQUFZLFVBQy9CZCxFQUFFLG1CQUFtQmUsU0FBUyxVQUM5QmYsRUFBRSxpQ0FBaUNnQixLQUFLUCxHQUN4Q1QsRUFBRSxzQkFBc0JjLFlBQVksVUFDekIsSUFBUEwsR0FDRlQsRUFBRSxzQkFBc0JlLFNBQVMsVUFFckIsSUFBVlIsR0FDRlAsRUFBRSxxQ0FBcUNPLEVBQVMsTUFBTU8sWUFBWSxVQUNuRCxJQUFiTixHQUNGUixFQUFFLHdDQUF3Q1EsRUFBWSxNQUFNTSxZQUFZLFVBRTVFLFNBQVNHLElBR1BS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QUFNZCxLQUFLLFdBQ3RCWixFQUFFLFNBQVNjLFlBQVksVUFDdkJkLEVBQUUsa0JBQWtCd0MsRUFBRyxNQUFNekIsU0FBUyxVQUN0QyxJQUFJK0IsRUFBVTlDLEVBQUUsa0JBQWtCd0MsRUFBRyxpQkFBaUI1QixLQUFLLFdBQzNEWixFQUFFLGtCQUFrQndDLEVBQUcsaUJBQWlCTyxJQUFJLG1CQUFtQkQsR0FDL0RYLE1BQU1DLE1BQU1DLGdCQUFnQkYsTUFBTW5DLEVBQUVBLEVBQUUsa0JBQWtCd0MsRUFBRyxNQUFPLENBQUVGLFNBQVUsU0FFaEZ0QyxFQUFFLHlDQUF5Q3VDLE1BQU0sV0FFL0NwQixFQURhbkIsRUFBRTBCLE1BQU1kLEtBQUssa0JBRzVCWixFQUFFLHNDQUFzQ3VDLE1BQU0sV0FDNUMsSUFBSUMsRUFBS3hDLEVBQUUwQixNQUFNZCxLQUFLLFdBQ2xCUyxFQUFRckIsRUFBRSx5QkFBeUJ3QyxFQUFHLE1BQU1QLFFBQVEsZUFFeEQzQixFQURZTixFQUFFLGVBQWU0QixNQUFNUCxJQUVuQ3JCLEVBQUUsZ0JBQWdCYyxZQUFZLFFBQzlCTyxFQUFNRSxLQUFLLDBCQUEwQmlCLEVBQUcsTUFBTXpCLFNBQVMsVUFFekRmLEVBQUUsZ0NBQWdDdUMsTUFBTSxXQUV0Q3BCLEVBRFVuQixFQUFFMEIsTUFBTWQsS0FBSyxvQkF3RHpCVCxFQUFLb0MsTUFBTSxXQUNUakMsRUFBYUgsRUFBS3lCLE1BQU01QixFQUFFMEIiLCJmaWxlIjoibWFwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKXtcclxuICB2YXIgdGFicyA9ICQoJy5tYXBfX3N3aXRjaGVyIGxpJyk7XHJcbiAgdmFyIGdyb3VwcyA9ICQoJy5tYXBfX2dyb3VwJyk7XHJcbiAgdmFyIGFjdGl2ZSA9IC0xO1xyXG4gIENoYW5nZUFjdGl2ZSgwKTtcclxuICB2YXIgY2F0ZWdvcnkgPSBcIlwiO1xyXG4gIHZhciBzdWJjYXRlZ29yeSA9IFwiXCI7XHJcbiAgdmFyIHRpdGxlPVwiXCI7XHJcblxyXG4gIHZhciBoYXNoID0gJChsb2NhdGlvbikuYXR0cignaGFzaCcpO1xyXG4gIGlmIChoYXNoIT1cIlwiKSB7XHJcbiAgICBTZXRGaWx0ZXIoaGFzaCk7XHJcbiAgICBVSWtpdC5VdGlscy5zY3JvbGxUb0VsZW1lbnQoVUlraXQuJCgkKFwiI21haW4tc2NoZW1lXCIpLCB7IGR1cmF0aW9uOiA1MDAgfSkpO1xyXG4gIH1cclxuICAvL9GA0LDQsdC+0YLQsCDRgSDQuNC90L/Rg9GC0L7QvFxyXG4gIGZ1bmN0aW9uIFJlc3VsdCgpIHtcclxuICAgICQoJy5zZWFyY2hfX2dyaWQnKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAkKCcuc2VhcmNoX19yZXN1bHQnKS5hZGRDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAkKCcuc2VhcmNoX19yZXN1bHQgcDpmaXJzdC1jaGlsZCcpLnRleHQodGl0bGUpO1xyXG4gICAgJCgnLnNlYXJjaF9fcmVzdWx0IGxpJykucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpO1xyXG4gICAgaWYgKHRpdGxlIT1cIlwiKSB7XHJcbiAgICAgICQoJy5zZWFyY2hfX3Jlc3VsdCBsaScpLmFkZENsYXNzKCdoaWRkZW4nKTtcclxuICAgIH1cclxuICAgIGlmIChjYXRlZ29yeSE9XCJcIilcclxuICAgICAgJCgnLnNlYXJjaF9fcmVzdWx0IGxpW2RhdGEtY2F0ZWdvcnk9XCInK2NhdGVnb3J5KydcIl0nKS5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XHJcbiAgICBpZiAoc3ViY2F0ZWdvcnkhPVwiXCIpXHJcbiAgICAgICQoJy5zZWFyY2hfX3Jlc3VsdCBsaVtkYXRhLXN1YmNhdGVnb3J5PVwiJytzdWJjYXRlZ29yeSsnXCJdJykucmVtb3ZlQ2xhc3MoJ2hpZGRlbicpO1xyXG4gIH1cclxuICBmdW5jdGlvbiBCYWNrKCkge1xyXG4gICAgY2F0ZWdvcnk9XCJcIjtcclxuICAgIHN1YmNhdGVnb3J5PVwiXCI7XHJcbiAgICB0aXRsZT1cIlwiO1xyXG4gICAgJCgnLnNlYXJjaCBpbnB1dCcpLnZhbChcIlwiKTtcclxuICAgICQoJy5zZWFyY2hfX3Jlc3VsdCcpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgICQoJy5zZWFyY2hfX2dyaWQnKS5hZGRDbGFzcygnYWN0aXZlJyk7XHJcbiAgfVxyXG4gIGZ1bmN0aW9uIElucHV0KHZhbCkge1xyXG4gICAgaWYgKHZhbCE9XCJcIikge1xyXG4gICAgICBSZXN1bHQoKTtcclxuICAgICAgJCgnLnNlYXJjaF9fcmVzdWx0IGxpJykuZWFjaChmdW5jdGlvbigpe1xyXG4gICAgICAgIHZhciBzdHIgPSAkKHRoaXMpLnRleHQoKS50b1VwcGVyQ2FzZSgpO1xyXG4gICAgICAgIGlmIChzdHIuaW5kZXhPZih2YWwpIT0wKSAkKHRoaXMpLmFkZENsYXNzKCdoaWRkZW4nKVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICAgIGVsc2UgQmFjaygpO1xyXG4gIH1cclxuICAkKCcuc2VhcmNoX19yZXN1bHQgbGknKS5jbGljayhmdW5jdGlvbigpe1xyXG4gICAgdmFyIGlkID0gJCh0aGlzKS5hdHRyKCdkYXRhLWlkJyk7XHJcbiAgICB2YXIgZ3JvdXAgPSAkKCcubWFwX19tYXJrZXJbZGF0YS1pZD1cIicraWQrJ1wiXScpLmNsb3Nlc3QoJy5tYXBfX2dyb3VwJyk7XHJcbiAgICB2YXIgaW5kZXggPSAkKCcubWFwX19ncm91cCcpLmluZGV4KGdyb3VwKTtcclxuICAgIENoYW5nZUFjdGl2ZShpbmRleCk7XHJcbiAgICAkKCcubWFwX19tYXJrZXInKS5yZW1vdmVDbGFzcygnZmFkZScpO1xyXG4gICAgZ3JvdXAuZmluZCgnLm1hcF9fbWFya2VyW2RhdGEtaWQhPVwiJytpZCsnXCJdJykuYWRkQ2xhc3MoJ2ZhZGUnKTtcclxuICAgIFVJa2l0Lm1vZGFsKFwiI3NlYXJjaFwiKS5oaWRlKCk7XHJcbiAgfSk7XHJcbiAgJCgnLnNlYXJjaF9fcmVzdWx0IHA6bGFzdC1jaGlsZCcpLmNsaWNrKGZ1bmN0aW9uKCl7XHJcbiAgICBCYWNrKCk7XHJcbiAgfSk7XHJcbiAgJCgnLnNlYXJjaF9fY2VsbCBsaScpLmNsaWNrKGZ1bmN0aW9uKCl7XHJcbiAgICBjYXRlZ29yeSA9ICQodGhpcykuYXR0cignZGF0YS1jYXRlZ29yeScpO1xyXG4gICAgc3ViY2F0ZWdvcnkgPSAkKHRoaXMpLmF0dHIoJ2RhdGEtc3ViY2F0ZWdvcnknKTtcclxuICAgIHRpdGxlID0gJCh0aGlzKS50ZXh0KCk7XHJcbiAgICBSZXN1bHQoKTtcclxuICB9KTtcclxuICAkKCcuc2VhcmNoIGlucHV0Jykub24oJ2lucHV0JyxmdW5jdGlvbigpIHtcclxuICAgIElucHV0KCQodGhpcykudmFsKCkudG9VcHBlckNhc2UoKSk7XHJcbiAgfSk7XHJcbiAgJCgnLm1hcF9fbWFya2VyW2RhdGEtaWRdJykuY2xpY2soZnVuY3Rpb24oKXtcclxuICAgIHZhciBpZCA9ICQodGhpcykuYXR0cignZGF0YS1pZCcpO1xyXG4gICAgJChcIi5pbmZvXCIpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgICQoXCIuaW5mb1tkYXRhLWlkPSdcIitpZCtcIiddXCIpLmFkZENsYXNzKCdhY3RpdmUnKTtcclxuICAgIHZhciBkYXRhX2JnID0gJChcIi5pbmZvW2RhdGEtaWQ9J1wiK2lkK1wiJ10gLmluZm9fX2ltZ1wiKS5hdHRyKFwiZGF0YS1iZ1wiKTtcclxuICAgICQoXCIuaW5mb1tkYXRhLWlkPSdcIitpZCtcIiddIC5pbmZvX19pbWdcIikuY3NzKCdiYWNrZ3JvdW5kLWltYWdlJyxkYXRhX2JnKTtcclxuICAgIFVJa2l0LlV0aWxzLnNjcm9sbFRvRWxlbWVudChVSWtpdC4kKCQoXCIuaW5mb1tkYXRhLWlkPSdcIitpZCtcIiddXCIpLCB7IGR1cmF0aW9uOiA1MDAgfSkpO1xyXG4gIH0pO1xyXG4gICQoJy5zY2hlbWUtc3RhcnRfX2NlbGwgLmFib3V0LWl0ZW1fX2xpbmsnKS5jbGljayhmdW5jdGlvbigpe1xyXG4gICAgdmFyIGZpbHRlciA9ICQodGhpcykuYXR0cignZGF0YS1maWx0ZXInKTtcclxuICAgIFNldEZpbHRlcihmaWx0ZXIpO1xyXG4gIH0pO1xyXG4gICQoJy5tYXBfX2NhdGFsb2cgbGk6bm90KDpmaXJzdC1jaGlsZCknKS5jbGljayhmdW5jdGlvbigpe1xyXG4gICAgdmFyIGlkID0gJCh0aGlzKS5hdHRyKCdkYXRhLWlkJyk7XHJcbiAgICB2YXIgZ3JvdXAgPSAkKCcubWFwX19tYXJrZXJbZGF0YS1pZD1cIicraWQrJ1wiXScpLmNsb3Nlc3QoJy5tYXBfX2dyb3VwJyk7XHJcbiAgICB2YXIgaW5kZXggPSAkKCcubWFwX19ncm91cCcpLmluZGV4KGdyb3VwKTtcclxuICAgIENoYW5nZUFjdGl2ZShpbmRleCk7XHJcbiAgICAkKCcubWFwX19tYXJrZXInKS5yZW1vdmVDbGFzcygnZmFkZScpO1xyXG4gICAgZ3JvdXAuZmluZCgnLm1hcF9fbWFya2VyW2RhdGEtaWQhPVwiJytpZCsnXCJdJykuYWRkQ2xhc3MoJ2ZhZGUnKTtcclxuICB9KTtcclxuICAkKCcubWFwX19jYXRhbG9nIGxpOmZpcnN0LWNoaWxkJykuY2xpY2soZnVuY3Rpb24oKXtcclxuICAgIHZhciBjYXQgPSAkKHRoaXMpLmF0dHIoJ2RhdGEtY2F0ZWdvcnknKTtcclxuICAgIFNldEZpbHRlcihjYXQpO1xyXG4gIH0pO1xyXG4gIGZ1bmN0aW9uIFNldEZpbHRlcihmaWx0ZXIpIHtcclxuICAgIGlmIChmaWx0ZXI9PVwiXCIpIHJldHVybjtcclxuICAgIGlmIChmaWx0ZXI9PVwiI2NpbmVtYVwiKSB7XHJcbiAgICAgIGdyb3Vwcy5lYWNoKGZ1bmN0aW9uKGkpe1xyXG4gICAgICAgIGlmICgkKHRoaXMpLmZpbmQoXCJbZGF0YS1jaW5lbWFdXCIpLmxlbmd0aCE9MCkge1xyXG4gICAgICAgICAgQ2hhbmdlQWN0aXZlKGkpO1xyXG4gICAgICAgICAgJCh0aGlzKS5maW5kKCcubWFwX19tYXJrZXI6bm90KFtkYXRhLWNpbmVtYV0pJykuYWRkQ2xhc3MoJ2ZhZGUnKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICB2YXIgZ3JvdXAgPSBncm91cHMuZXEoYWN0aXZlKTtcclxuICAgICQoJy5tYXBfX21hcmtlcicpLnJlbW92ZUNsYXNzKCdmYWRlJyk7XHJcbiAgICBncm91cC5maW5kKCcubWFwX19tYXJrZXJbZGF0YS1jYXRlZ29yeSE9XCInK2ZpbHRlcisnXCJdJykuYWRkQ2xhc3MoJ2ZhZGUnKTtcclxuICB9XHJcbiAgZnVuY3Rpb24gQ2hhbmdlQWN0aXZlKGluZGV4KSB7XHJcbiAgICBpZiAoaW5kZXg8MCB8fCBpbmRleD4yIHx8IGluZGV4PT1hY3RpdmUpIHJldHVybjtcclxuICAgIGFjdGl2ZSA9IGluZGV4O1xyXG4gICAgdGFicy5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcbiAgICB0YWJzLmVxKGFjdGl2ZSkuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgU2VsZWN0Rmxvb3IoYWN0aXZlKTtcclxuICB9XHJcbiAgZnVuY3Rpb24gU2VsZWN0Rmxvb3IoaW5kZXgpIHtcclxuICAgIGdyb3Vwcy5yZW1vdmVDbGFzcygnYWN0aXZlJykucmVtb3ZlQ2xhc3MoJ2hpZGUnKS5yZW1vdmVDbGFzcygnc2Vjb25kJykucmVtb3ZlQ2xhc3MoJ3RoaXJkJyk7XHJcbiAgICBncm91cHMuZXEoaW5kZXgpLmFkZENsYXNzKCdhY3RpdmUnKTtcclxuICAgIHN3aXRjaCAoaW5kZXgpIHtcclxuICAgICAgY2FzZSAwOlxyXG4gICAgICAgIGdyb3Vwcy5lcSgxKS5hZGRDbGFzcygnaGlkZScpO1xyXG4gICAgICAgIGdyb3Vwcy5lcSgyKS5hZGRDbGFzcygnaGlkZScpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICBjYXNlIDE6XHJcbiAgICAgICAgZ3JvdXBzLmVxKDApLmFkZENsYXNzKCdzZWNvbmQnKTtcclxuICAgICAgICBncm91cHMuZXEoMikuYWRkQ2xhc3MoJ2hpZGUnKTtcclxuICAgICAgICBicmVhaztcclxuICAgICAgY2FzZSAyOlxyXG4gICAgICAgIGdyb3Vwcy5lcSgwKS5hZGRDbGFzcygndGhpcmQnKTtcclxuICAgICAgICBncm91cHMuZXEoMSkuYWRkQ2xhc3MoJ3NlY29uZCcpO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgfVxyXG4gICAgJCgnLm1hcF9fbWFya2VyJykucmVtb3ZlQ2xhc3MoJ3Zpc2libGUnKS5yZW1vdmVDbGFzcygnZmFkZScpO1xyXG4gICAgdmFyIG1hcmtlcnMgPSBncm91cHMuZXEoaW5kZXgpLmZpbmQoXCIubWFwX19tYXJrZXJcIik7XHJcbiAgICB2YXIgZGVsYXkgPSA1MDAuMC9tYXJrZXJzLmxlbmd0aDtcclxuICAgIHZhciBpID0gMDtcclxuICAgIG1hcmtlcnMuZWFjaChmdW5jdGlvbihpbmRleCl7XHJcbiAgICAgIHZhciBzZWxmID0gJCh0aGlzKTtcclxuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgIGlmIChzZWxmLmNsb3Nlc3QoJy5tYXBfX2dyb3VwLmFjdGl2ZScpLmxlbmd0aCkge1xyXG4gICAgICAgICAgICBzZWxmLmFkZENsYXNzKCd2aXNpYmxlJyk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSwgaSk7XHJcbiAgICAgICAgaSs9ZGVsYXk7XHJcbiAgICB9KTtcclxuICB9XHJcbiAgdGFicy5jbGljayhmdW5jdGlvbigpe1xyXG4gICAgQ2hhbmdlQWN0aXZlKHRhYnMuaW5kZXgoJCh0aGlzKSkpO1xyXG4gIH0pO1xyXG59KTsiXX0=
